<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ETF定投决策工具</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h2>ETF定投助手</h2>
      <div class="settings-header">
        <button id="toggleSettings">设置</button>
      </div>
      <div id="settingsContainer" class="settings-container hidden">
        <label for="increaseRate">周增幅比例 (%):</label>
        <input type="number" id="increaseRate" value="10" /><br />
        <label for="monthlyIncreaseRate">月增幅比例 (%):</label>
        <input type="number" id="monthlyIncreaseRate" value="10" /><br />
          <label for="investmentDay">每周定投日:</label>
          <select id="investmentDay">
              <option value="1">周一</option>
              <option value="2">周二</option>
              <option value="3">周三</option>
              <option value="4">周四</option>
              <option value="5">周五</option>
          </select><br />
        <button id="saveSettings">保存设置</button>
          <div id="settingsStatus"></div>
      </div>

      <div class="info">
        <p>
          <strong>下个定投日：</strong>
          <span id="nextInvestmentDate">加载中...</span>
        </p>
        <p>
          <strong>上个定投日：</strong>
          <span id="lastInvestmentDate">暂无记录</span>
        </p>
          <p>
              <strong>当前周增幅：</strong>
              <span id="currentWeeklyIncreaseRate">--</span>
          </p>
            <p>
              <strong>当前月增幅：</strong>
              <span id="currentMonthlyIncreaseRate">--</span>
          </p>
        <p>
          <strong>假如今天定投：</strong>
          <span id="currentInvestmentPercentage">--</span>
        </p>

        <p>
          <strong>连续下跌周数：</strong>
          <span id="consecutiveDownDays">0</span>
        </p>
      </div>
      <button id="executeInvestment">如果定投完成请点击</button>
      <div id="statusMessage"></div>

      <!-- 行情趋势部分 -->
      <div class="trends">
        <h3>行情趋势</h3>
        <div class="trend">
          <p><strong>纳斯达克趋势：</strong></p>
          <p id="nasdaqTrends">
            上上周（加载中...） | 上周（加载中...） | 本周（加载中...）
          </p>
        </div>
        <div class="trend">
          <p><strong>标普500趋势：</strong></p>
          <p id="sp500Trends">
            上上周（加载中...） | 上周（加载中...） | 本周（加载中...）
          </p>
        </div>
      </div>
      <div class="status-container">
        <textarea id="statusBox" readonly></textarea>
      </div>
    </div>
    <script src="popup.js" type="module"></script>
  </body>
</html>